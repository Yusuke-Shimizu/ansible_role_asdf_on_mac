---
- name: Install plugins
  shell: /bin/bash -lc "asdf plugin-add {{ item }}"
  with_items:
    - python
    - ruby
    - golang

# - name: List plugins
#   shell: /bin/bash -lc "asdf list-all {{ item }}"
#   register: result
#   with_items:
#     - python
#     - ruby
#     - golang
# - debug: var=item.stdout_lines
#   with_items: '{{ result.results }}'

- name: Install language
  shell: /bin/bash -lc "asdf install {{ item.name }} {{ item.version }}"
  with_items:
    - { name: python, version: 3.7.1 }
    - { name: ruby, version: 2.5.3 }
    - { name: golang, version: 1.11 }

- name: set global
  shell: /bin/bash -lc "asdf global {{ item.name }} {{ item.version }}"
  with_items:
    - { name: python, version: 3.7.1 }
    - { name: ruby, version: 2.5.3 }
    - { name: golang, version: 1.11 }

- name: Recreate shims
  shell: /bin/bash -lc "asdf reshim python"
